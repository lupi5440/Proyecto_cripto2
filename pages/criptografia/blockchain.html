<section id="blockchain" class="page">
    <h2>‚õìÔ∏è Blockchain</h2>
    <p class="page-description">Blockchain es una tecnolog√≠a de registro distribuido que usa criptograf√≠a
        para crear una cadena inmutable de bloques. Fundamental en criptomonedas y contratos inteligentes [12].</p>

    <div class="demo-container">
        <div class="demo-section">
            <h3>üß± ¬øQu√© es un Bloque? [12]</h3>
            <div class="algo-info">
                <p>Cada bloque contiene:</p>
                <ul>
                    <li><strong>Datos:</strong> Transacciones, contratos, informaci√≥n</li>
                    <li><strong>Hash del bloque:</strong> Identificador √∫nico calculado</li>
                    <li><strong>Hash del bloque anterior:</strong> Crea la cadena</li>
                    <li><strong>Timestamp:</strong> Marca de tiempo</li>
                    <li><strong>Nonce:</strong> N√∫mero usado en miner√≠a (Proof of Work)</li>
                </ul>

                <div class="code-example">
                    <strong>Estructura de Bloque:</strong>
                    <pre>
Bloque #1 (G√©nesis)
‚îú‚îÄ Hash: 0000a4f3...
‚îú‚îÄ Hash Anterior: 0000000000... (ninguno)
‚îú‚îÄ Timestamp: 2009-01-03
‚îú‚îÄ Nonce: 2083236893
‚îî‚îÄ Datos: "The Times 03/Jan/2009..."

Bloque #2
‚îú‚îÄ Hash: 00008b3c...
‚îú‚îÄ Hash Anterior: 0000a4f3... ‚Üê Conectado al #1
‚îú‚îÄ Timestamp: 2009-01-09
‚îú‚îÄ Nonce: 856192328
‚îî‚îÄ Datos: Transacci√≥n A ‚Üí B (50 BTC)
                    </pre>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h3>üîó Construcci√≥n de la cadena [12]</h3>
            <div class="blockchain-visual">
                <div class="block">
                    <div class="block-header">Bloque #0</div>
                    <div class="block-content">
                        <small>Hash: abc123...</small><br>
                        <small>Prev: 000000...</small>
                    </div>
                </div>
                <div class="chain-link">‚Üí</div>
                <div class="block">
                    <div class="block-header">Bloque #1</div>
                    <div class="block-content">
                        <small>Hash: def456...</small><br>
                        <small>Prev: abc123...</small>
                    </div>
                </div>
                <div class="chain-link">‚Üí</div>
                <div class="block">
                    <div class="block-header">Bloque #2</div>
                    <div class="block-content">
                        <small>Hash: ghi789...</small><br>
                        <small>Prev: def456...</small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="demo-section" style="margin-top: 24px;">
        <h3>Demo Interactiva: Crear Blockchain</h3>
        <div class="blockchain-demo">
            <div class="input-group">
                <label for="block-data">Datos del bloque:</label>
                <input type="text" id="block-data" placeholder="Ej: Alice paga 5 BTC a Bob"
                    style="width: 100%; max-width: 100%;" />
            </div>

            <div style="display: flex; gap: 10px; margin-top: 16px;">
                <button id="mine-block" class="btn-primary" style="flex: 1; margin: 0;">Minar Bloque</button>
                <button id="tamper-block" class="btn-attack" style="flex: 1; margin: 0;">Alterar Blockchain</button>
                <button id="reset-chain" class="btn-primary"
                    style="flex: 1; margin: 0; background: #666;">Reiniciar</button>
            </div>

            <div id="blockchain-container" class="blockchain-container"></div>
            <div id="blockchain-status" class="blockchain-status"></div>
        </div>
    </div>

    <div class="demo-container">
        <div class="demo-section">
            <h3>Inmutabilidad [12]</h3>
            <div class="algo-info">
                <p><strong>¬øPor qu√© blockchain es inmutable?</strong></p>
                <div class="code-example">
                    <strong>Intento de alterar:</strong>
                    <pre>
1. Atacante modifica Bloque #100
   ‚Üí Hash del bloque cambia

2. Bloque #101 apunta al hash antiguo
   ‚Üí Cadena rota detectada ‚ùå

3. Atacante intenta recalcular #101, #102...
   ‚Üí Necesita recalcular TODOS los bloques siguientes
   ‚Üí Red rechaza cadena m√°s corta
   
Conclusi√≥n: Alterar blockchain requiere:
‚úó Recalcular todos los bloques (mucho poder computacional)
‚úó Controlar >51% de la red (ataque 51%)
‚úì Pr√°cticamente imposible en redes grandes
                    </pre>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h3>Proof of Work (PoW) [12]</h3>
            <div class="algo-info">
                <p><strong>Miner√≠a:</strong> Encontrar un nonce que haga que el hash comience con ceros</p>
                <div class="code-example">
                    <strong>Algoritmo de miner√≠a:</strong>
                    <pre>
Objetivo: Hash que empiece con "0000..."

Intento 1: nonce=0 ‚Üí Hash: 8a3b... ‚ùå
Intento 2: nonce=1 ‚Üí Hash: 7f2c... ‚ùå
Intento 3: nonce=2 ‚Üí Hash: 9d4e... ‚ùå
...
Intento 48201: nonce=48200 ‚Üí Hash: 0000a3... ‚úÖ

Bitcoin: ~13 quintillones de intentos/segundo globalmente
Dificultad ajustada para 1 bloque cada 10 minutos
                    </pre>
                </div>

                <p><strong>Dificultad:</strong></p>
                <ul>
                    <li>1 cero: ~16 intentos</li>
                    <li>2 ceros: ~256 intentos</li>
                    <li>4 ceros: ~65,536 intentos</li>
                    <li>10 ceros: ~1 bill√≥n de intentos</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="comparison-table">
        <h3>Consensos de blockchain [12]</h3>
        <table>
            <thead>
                <tr>
                    <th>Mecanismo</th>
                    <th>C√≥mo Funciona</th>
                    <th>Energ√≠a</th>
                    <th>Velocidad</th>
                    <th>Ejemplo</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Proof of Work</strong></td>
                    <td>Resolver puzzle criptogr√°fico</td>
                    <td>üî¥ Muy alta</td>
                    <td>üêå Lenta</td>
                    <td>Bitcoin, Ethereum (antiguo)</td>
                </tr>
                <tr>
                    <td><strong>Proof of Stake</strong></td>
                    <td>Validadores con tokens bloqueados</td>
                    <td>üü¢ Muy baja</td>
                    <td>‚ö° R√°pida</td>
                    <td>Ethereum 2.0, Cardano</td>
                </tr>
                <tr>
                    <td><strong>Proof of Authority</strong></td>
                    <td>Validadores pre-aprobados</td>
                    <td>üü¢ Baja</td>
                    <td>‚ö° Muy r√°pida</td>
                    <td>Redes privadas</td>
                </tr>
                <tr>
                    <td><strong>Delegated PoS</strong></td>
                    <td>Votar por delegados validadores</td>
                    <td>üü¢ Baja</td>
                    <td>‚ö° R√°pida</td>
                    <td>EOS, Tron</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="info-box">
        <h4>Aplicaciones de blockchain [12]</h4>
        <ul>
            <li><strong>Criptomonedas:</strong> Bitcoin, Ethereum, stablecoins</li>
            <li><strong>Contratos Inteligentes:</strong> C√≥digo auto-ejecutable en blockchain</li>
            <li><strong>NFTs:</strong> Tokens no fungibles, certificados de autenticidad</li>
            <li><strong>Supply Chain:</strong> Rastreo de productos desde origen</li>
            <li><strong>Registros M√©dicos:</strong> Historial m√©dico inmutable</li>
            <li><strong>Votaci√≥n Electr√≥nica:</strong> Votos transparentes y verificables</li>
            <li><strong>Propiedad Intelectual:</strong> Timestamps de creaciones</li>
            <li><strong>DeFi:</strong> Finanzas descentralizadas sin intermediarios</li>
        </ul>
    </div>

    <div class="info-box" style="background: #fff3e0; border-left-color: #ff9800;">
        <h4>‚ö†Ô∏è Limitaciones y desaf√≠os [12]</h4>
        <ul>
            <li><strong>Escalabilidad:</strong> Bitcoin ~7 tx/s vs Visa ~24,000 tx/s</li>
            <li><strong>Consumo Energ√©tico:</strong> Bitcoin consume m√°s electricidad que pa√≠ses enteros</li>
            <li><strong>Almacenamiento:</strong> Blockchain de Bitcoin > 500 GB y creciendo</li>
            <li><strong>Finalidad:</strong> Transacciones tardan minutos en confirmarse</li>
            <li><strong>Privacidad:</strong> Todas las transacciones son p√∫blicas</li>
            <li><strong>Regulaci√≥n:</strong> Marco legal a√∫n en desarrollo</li>
            <li><strong>Ataque 51%:</strong> Si alguien controla >51% puede alterar transacciones recientes</li>
        </ul>
    </div>
</section>

<style>
    .blockchain-visual {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        background: white;
        border-radius: 8px;
        overflow-x: auto;
    }

    .block {
        background: linear-gradient(135deg, #1687a7 0%, #0b3954 100%);
        color: white;
        border-radius: 8px;
        padding: 16px;
        min-width: 140px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .block-header {
        font-weight: bold;
        font-size: 1.1em;
        margin-bottom: 8px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        padding-bottom: 4px;
    }

    .block-content {
        font-size: 0.85em;
    }

    .chain-link {
        color: #1687a7;
        font-size: 2em;
        font-weight: bold;
        margin: 0 8px;
    }

    .blockchain-demo {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
    }

    .blockchain-container {
        margin-top: 20px;
        padding: 16px;
        background: white;
        border-radius: 8px;
        min-height: 100px;
    }

    .blockchain-status {
        margin-top: 16px;
        padding: 12px;
        background: #e8f5e9;
        border-left: 4px solid #4caf50;
        border-radius: 4px;
        font-weight: 500;
    }

    .mini-block {
        background: #f5f5f5;
        border: 2px solid #1687a7;
        border-radius: 6px;
        padding: 12px;
        margin-bottom: 12px;
        font-size: 0.9em;
    }

    .mini-block.invalid {
        border-color: #f44336;
        background: #ffebee;
    }

    .mini-block.valid {
        border-color: #4caf50;
        background: #e8f5e9;
    }
</style>